<!DOCTYPE html>
<html lang="pt">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>login</title>
    <link rel="stylesheet" href="style.css">


</head>

<body>

    <div class="container">
        <h2>login</h2>
        <form id="loginForm">
            <input type="email" id="email" placeholder="Digite seu e-mail" required>
            <input type="password" id="password" placeholder="Digite sua senha" required>
            <button type="submit">Entrar</button>
        </form>
        
       
        <p id="errorMessage" style=" color: red;display: none;"> email ou senha incorretos</p>
        <button id="openRegisterform"  >cadastre-se </button>
        
        

    </div>

    <script>

        let isRegistering = false; //define se esta no modo login ou cadastro


        document.getElementById("toggleForm").addEventListener("click", function(event) {
            event.preventDefault();
            isRegistering = !isRegistering;

            document.getElementById("formTitle").innerText = isRegistering ? "Cadastro" : "Login";
            document.getElementById("submitButton").innerText = isRegistering ? "Cadastrar" : "Entrar";
            document.getElementById("toggleForm").innerText = isRegistering ? "Login" : "Cadastro";
            document.getElementById("errorMessage").style.display = "none";
        });

        //evento de envio do formulario

        document.getElementById("loginForm").addEventListener("submit", async function(event) {
            event.preventDefault();  //evita o recarregmmento da pagina

            var email = document.getElementById("email").value;
            var password = document.getElementById("password").value; 

            if (isRegistering) {
                //cadastro salva o email e senha no local store

                localStorage.setItem("email", email);
                localStorage.setItem("password", password);
                alert("cadastro realizado com sucesso agora fa√ßa login");
                isRegistering =false; //volta para o modo login
                document.getElementById("formTitle").innerText = "Login";
                document.getElementById("submitButton").innerText = "Entrar";
                document.getElementById("toggleForm").innerText = "Cadastro";
                document.getElementById("errorMessage").style.display = "none";
            } else {
                //login verifica se o email e senha estao corretos  
                var storedEmail = localStorage.getItem("email");
                var storedPassword = localStorage.getItem("password");

                if (email === storedEmail && password === storedPassword) {
                    localStorage.setItem("loggedIn", "true"); //marca como logado
                    window.location.href = "home.html"; //redireciona para a pagina inicial
                } else {
                    document.getElementById("errorMessage").style.display = "block";
                }
            }
        });
               
        
    </script>




</body>

</html>